<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>curl 命令行下载工具使用方法小结</title>
	
	<meta name="author" content="kula41">

	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<![endif]-->

	<!-- Le styles -->
	<link href="/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="/assets/resources/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="/assets/resources/typo/typo.css" rel="stylesheet">
	<link href="/assets/resources/syntax/syntax.css" rel="stylesheet">
	<link href="/assets/css/style.css" rel="stylesheet">

	<!-- Le fav and touch icons -->
	
	<link rel="icon" href="/favicon.ico" type="image/x-icon">
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
	<!-- Update these with your own images
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->

	<link rel="alternate" type="application/rss+xml" title="" href="/rss.xml">

	<!-- <script src="http://cdn.bootcss.com/jquery/1.8.2/jquery.min.js"></script> -->
	<script src="http://cdn.bootcss.com/jquery/1.10.1/jquery.min.js"></script>
	<!--google analyse-->

</head>

<body>
 	<nav class="navbar-default visible-xs">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
		</div>

		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				<li><a href="/">首页</a></li>
				<li><a href="/category.html">分类</a></li>
				<li><a href="/tag.html">标签</a></li>
				<li><a href="/series.html">系列文章</a></li>
			</ul>
		</div>
	</nav>

	<div id="left-side" class="col-sm-3 sidebar hidden-xs">
		<!-- 
<header class="sidebar-header" role="banner">
	<a href="/">
		<img src="http://www.gravatar.com/avatar/726351295ec82e145928582f595aa3aa?s=150" class="img-circle" />
	</a>
	<h3 class="title">
        <a href="/"></a>
    </h3>
</header> -->


<div id="bio" class="text-center">
	Do not build on quicksand high
</div>


<div class='navigator text-center'>
	<a href='/index.html' title='首页'>&#xf012b;</a>
	<a href='/rss.xml' title='RSS订阅'>&#xf01bc;</a>
	<!-- <a href='/me.html' title='关于我'>&#xf00cc;</a> -->
	<a href='/series.html' title='系列文章'>&#xf0161;</a>
</div>

<div class='category'>
	<ul>
		
			<li><a href="/category.html#life">life<span>1</span></a></li>
		
			<li><a href="/category.html#hardware">hardware<span>2</span></a></li>
		
			<li><a href="/category.html#resource">resource<span>1</span></a></li>
		
			<li><a href="/category.html#deploy">deploy<span>1</span></a></li>
		
			<li><a href="/category.html#seo">seo<span>3</span></a></li>
		
			<li><a href="/category.html#linux">linux<span>1</span></a></li>
		
	</ul>
</div>

<div class='tags'>
	
		<a href="/tag.html#github-page" style='font-size:17px;'>github-page</a>
	
		<a href="/tag.html#jekyll" style='font-size:17px;'>jekyll</a>
	
		<a href="/tag.html#Hardware" style='font-size:19px;'>Hardware</a>
	
		<a href="/tag.html#storage" style='font-size:19px;'>storage</a>
	
		<a href="/tag.html#raid" style='font-size:17px;'>raid</a>
	
		<a href="/tag.html#Git" style='font-size:17px;'>Git</a>
	
		<a href="/tag.html#tool" style='font-size:17px;'>tool</a>
	
		<a href="/tag.html#openstack" style='font-size:17px;'>openstack</a>
	
		<a href="/tag.html#seo" style='font-size:21px;'>seo</a>
	
		<a href="/tag.html#include" style='font-size:17px;'>include</a>
	
		<a href="/tag.html#linux" style='font-size:17px;'>linux</a>
	
		<a href="/tag.html#curl" style='font-size:17px;'>curl</a>
	
		<a href="/tag.html#collet" style='font-size:17px;'>collet</a>
	
		<a href="/tag.html#web" style='font-size:17px;'>web</a>
	
</div>
<div class='foot text-center'>
	<p>Powered by</p><p><a href='https://github.com/'>Github</a> <a href='http://jekyllrb.com/'>jekyll</a> <a href="http://www.bootcss.com/">bootstrap</a> <a href="http://typo.sofi.sh/">typo.css</a> <a href="http://jekyllthemes.org/themes/dbyll/">Dbyll</a> <a href="http://disqus.com" class="dsq-brlink">Disqus</a></p>
</div>
	</div>

	<div class="col-sm-9 typo" style="background-color:#fff;">
		<div class="col-sm-8" style=" padding: 40px 0; "><div class="page-header">
  <h1>curl 命令行下载工具使用方法小结 </h1>
</div>
	
<article>

	<div class="col-sm-12">
  	<small>
	   
	   April 
	   20th,
	   
	   2015
	 </small>
	  <div class="article_body" id="article_body">
	  <p>curl 命令行下载工具使用方法小结</p>

<p>1) 
二话不说，先从这里开始吧！ 
curl http://www.yahoo.com</p>

<p>回车之后，www.yahoo.com 的html就稀里哗啦地显示在屏幕上了~~~~~</p>

<p>2) 
嗯，要想把读过来页面存下来，是不是要这样呢？ 
curl http://www.yahoo.com &gt; page.html</p>

<p>当然可以，但不用这么麻烦的！ 
用curl的内置option就好，存下http的结果，用这个option: -o 
curl -o page.html http://www.yahoo.com</p>

<p>这样，你就可以看到屏幕上出现一个下载页面进度指示。等进展到100%，自然就OK咯</p>

<p>3) 
什么什么？！访问不到？肯定是你的proxy没有设定了。 
使用curl的时候，用这个option可以指定http访问所使用的proxy服务器及其端口： -x 
curl -x 123.45.67.89:1080 -o page.html http://www.yahoo.com</p>

<p>4) 
访问有些网站的时候比较讨厌，他使用cookie来记录session信息。 
像IE/NN这样的浏览器，当然可以轻易处理cookie信息，但我们的curl呢？….. 
我们来学习这个option: -D &lt;– 这个是把http的response里面的cookie信息存到一个特别的文件中去 
curl -x 123.45.67.89:1080 -o page.html -D cookie0001.txt http://www.yahoo.com</p>

<p>这样，当页面被存到page.html的同时，cookie信息也被存到了cookie0001.txt里面了</p>

<p>5） 
那么，下一次访问的时候，如何继续使用上次留下的cookie信息呢？要知道，很多网站都是靠监视你的cookie信息， 
来判断你是不是不按规矩访问他们的网站的。 
这次我们使用这个option来把上次的cookie信息追加到http request里面去： -b 
curl -x 123.45.67.89:1080 -o page1.html -D cookie0002.txt -b cookie0001.txt http://www.yahoo.com</p>

<p>这样，我们就可以几乎模拟所有的IE操作，去访问网页了！</p>

<p>6） 
稍微等等~~~~~我好像忘记什么了~~~~~ 
对了！是浏览器信息~~~~</p>

<p>有些讨厌的网站总要我们使用某些特定的浏览器去访问他们，有时候更过分的是，还要使用某些特定的版本~~~~ 
NND，哪里有时间为了它去找这些怪异的浏览器呢！？</p>

<p>好在curl给我们提供了一个有用的option，可以让我们随意指定自己这次访问所宣称的自己的浏览器信息： -A 
curl -A “Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)” -x 123.45.67.89:1080 -o page.html -D cookie0001.txt http://www.yahoo.com</p>

<p>这样，服务器端接到访问的要求，会认为你是一个运行在Windows 2000上的IE6.0，嘿嘿嘿，其实也许你用的是苹果机呢！</p>

<p>而”Mozilla/4.73 [en] (X11; U; Linux 2.2; 15 i686”则可以告诉对方你是一台PC上跑着的Linux，用的是Netscape 4.73，呵呵呵</p>

<p>7） 
另外一个服务器端常用的限制方法，就是检查http访问的referer。比如你先访问首页，再访问里面所指定的下载页，这第二次访问的 referer地址就是第一次访问成功后的页面地址。这样，服务器端只要发现对下载页面某次访问的referer地址不是首页的地址，就可以断定那是个盗连了~~~~~</p>

<p>讨厌讨厌~~~我就是要盗连~~~~~！！ 
幸好curl给我们提供了设定referer的option： -e 
curl -A “Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)” -x 123.45.67.89:1080 -e “mail.yahoo.com” -o page.html -D cookie0001.txt http://www.yahoo.com</p>

<p>这样，就可以骗对方的服务器，你是从mail.yahoo.com点击某个链接过来的了，呵呵呵</p>

<p>8） 
写着写着发现漏掉什么重要的东西了！—– 利用curl 下载文件</p>

<p>刚才讲过了，下载页面到一个文件里，可以使用 -o ，下载文件也是一样。 
比如， curl -o 1.jpg http://cgi2.tky.3web.ne.jp/~zzh/screen1.JPG 
这里教大家一个新的option： -O 
大写的O，这么用： curl -O http://cgi2.tky.3web.ne.jp/~zzh/screen1.JPG 
这样，就可以按照服务器上的文件名，自动存在本地了！</p>

<p>再来一个更好用的。 
如果screen1.JPG以外还有screen2.JPG、screen3.JPG、….、screen10.JPG需要下载，难不成还要让我们写一个script来完成这些操作？ 
不干！ 
在curl里面，这么写就可以了： 
curl -O http://cgi2.tky.3web.ne.jp/~zzh/screen[1-10].JPG</p>

<p>呵呵呵，厉害吧？！~~~</p>

<p>9） 
再来，我们继续讲解下载！ 
curl -O http://cgi2.tky.3web.ne.jp/~/[001-201].JPG</p>

<p>这样产生的下载，就是 
~zzh/001.JPG 
~zzh/002.JPG 
… 
~zzh/201.JPG 
~nick/001.JPG 
~nick/002.JPG 
… 
~nick/201.JPG</p>

<p>够方便的了吧？哈哈哈</p>

<p>咦？高兴得太早了。 
由于zzh/nick下的文件名都是001，002…，201，下载下来的文件重名，后面的把前面的文件都给覆盖掉了~~~</p>

<p>没关系，我们还有更狠的！ 
curl -o #2_#1.jpg http://cgi2.tky.3web.ne.jp/~/[001-201].JPG</p>

<p>–这是…..自定义文件名的下载？ 
–对头，呵呵！</p>

<h1 id="zzhnick">1是变量，指的是这部分，第一次取值zzh，第二次取值nick</h1>
<p>#2代表的变量，则是第二段可变部分—[001-201]，取值从001逐一加到201 
这样，自定义出来下载下来的文件名，就变成了这样： 
原来： ~zzh/001.JPG —&gt; 下载后： 001-zzh.JPG 
原来： ~nick/001.JPG —&gt; 下载后： 001-nick.JPG</p>

<p>这样一来，就不怕文件重名啦，呵呵</p>

<p>9） 
继续讲下载 
我们平时在windows平台上，flashget这样的工具可以帮我们分块并行下载，还可以断线续传。 
curl在这些方面也不输给谁，嘿嘿</p>

<p>比如我们下载screen1.JPG中，突然掉线了，我们就可以这样开始续传 
curl -c -O http://cgi2.tky.3wb.ne.jp/~zzh/screen1.JPG</p>

<p>当然，你不要拿个flashget下载了一半的文件来糊弄我~~~~别的下载软件的半截文件可不一定能用哦~~~</p>

<p>分块下载，我们使用这个option就可以了： -r 
举例说明 
比如我们有一个http://cgi2.tky.3web.ne.jp/~zzh/zhao1.mp3 要下载（赵老师的电话朗诵 :D ） 
我们就可以用这样的命令： 
curl -r 0-10240 -o “zhao.part1” http:/cgi2.tky.3web.ne.jp/~zzh/zhao1.mp3 &amp;\ 
curl -r 10241-20480 -o “zhao.part1” http:/cgi2.tky.3web.ne.jp/~zzh/zhao1.mp3 &amp;\ 
curl -r 20481-40960 -o “zhao.part1” http:/cgi2.tky.3web.ne.jp/~zzh/zhao1.mp3 &amp;\ 
curl -r 40961- -o “zhao.part1” http:/cgi2.tky.3web.ne.jp/~zzh/zhao1.mp3</p>

<p>这样就可以分块下载啦。 
不过你需要自己把这些破碎的文件合并起来 
如果你用UNIX或苹果，用 cat zhao.part* &gt; zhao.mp3就可以 
如果用的是Windows，用copy /b 来解决吧，呵呵</p>

<p>上面讲的都是http协议的下载，其实ftp也一样可以用。 
用法嘛， 
curl -u name:passwd ftp://ip:port/path/file 
或者大家熟悉的 
curl ftp://name:passwd@ip:port/path/file</p>

<p>10) 
说完了下载，接下来自然该讲上传咯 
上传的option是 -T</p>

<p>比如我们向ftp传一个文件： curl -T localfile -u name:passwd ftp://upload_site:port/path/</p>

<p>当然，向http服务器上传文件也可以 
比如 curl -T localfile http://cgi2.tky.3web.ne.jp/~zzh/abc.cgi 
注意，这时候，使用的协议是HTTP的PUT method</p>

<p>刚才说到PUT，嘿嘿，自然让老服想起来了其他几种methos还没讲呢！ 
GET和POST都不能忘哦。</p>

<p>http提交一个表单，比较常用的是POST模式和GET模式</p>

<p>GET模式什么option都不用，只需要把变量写在url里面就可以了 
比如： 
curl http://www.yahoo.com/login.cgi?user=nickwolfe&amp;password=12345</p>

<p>而POST模式的option则是 -d</p>

<p>比如，curl -d “user=nickwolfe&amp;password=12345” http://www.yahoo.com/login.cgi 
就相当于向这个站点发出一次登陆申请~~~~~</p>

<p>到底该用GET模式还是POST模式，要看对面服务器的程序设定。</p>

<p>一点需要注意的是，POST模式下的文件上的文件上传，比如</p>
<form method="POST" enctype="multipar/form-data" action="http://cgi2.tky.3web.ne.jp/~zzh/up_file.cgi"> 
&lt;input type=file name=upload&gt; 
&lt;input type=submit name=nick value="go"&gt; 
</form>
<p>这样一个HTTP表单，我们要用curl进行模拟，就该是这样的语法： 
curl -F upload=@localfile -F nick=go http://cgi2.tky.3web.ne.jp/~zzh/up_file.cgi</p>

<p>罗罗嗦嗦讲了这么多，其实curl还有很多很多技巧和用法 
比如 https的时候使用本地证书，就可以这样 
curl -E localcert.pem https://remote_server</p>

<p>再比如，你还可以用curl通过dict协议去查字典~~~~~ 
curl dict://dict.org/d:computer</p>

	  </div>

		
		<ul class="tag_box list-unstyled list-inline">
		  <li><i class="fa fa-folder-open"></i></li>
		  
		  
			 
				<li><a href="/category.html#linux">
					linux <span>(1)</span>
					
				</a></li>
			
		  
		</ul>
		  

		
		<ul class="list-inline">
		  <li><i class="fa fa-tags"></i></li>
		  
		  
			 
				<li>
					<a href="/tag.html#linux">
					linux <span>(1)</span>
					,
					</a>
				</li>
			 
				<li>
					<a href="/tag.html#curl">
					curl <span>(1)</span>
					
					</a>
				</li>
			
		  
		  
		</ul>
		  

		<hr>

		<div>
      <section class="share col-sm-6">
        <h4 class="section-title">Share Post</h4>
        <!-- JiaThis Button BEGIN -->
		<div class="jiathis_style">
			<a class="jiathis_button_tsina"></a>
			<a class="jiathis_button_tqq"></a>
			<a class="jiathis_button_weixin"></a>
			<a class="jiathis_button_renren"></a>
			<a class="jiathis_button_douban"></a>
			<a class="jiathis_button_fb"></a>
			<a class="jiathis_button_twitter"></a>
			<a class="jiathis_button_evernote"></a>
			<a class="jiathis_button_qzone"></a>
			<a class="jiathis_button_ydnote"></a>
			<a class="jiathis_button_linkedin"></a>
			<a href="http://www.jiathis.com/share?uid=1900073" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
			<a class="jiathis_counter_style"></a>
		</div>
		<script type="text/javascript">
		var jiathis_config = {data_track_clickback:'true'};
		</script>
		<script type="text/javascript" src="http://v3.jiathis.com/code_mini/jia.js?uid=1900073" charset="utf-8"></script>
		<!-- JiaThis Button END -->
      </section>

<!--       <section class="col-sm-6 author">
        <img src="http://www.gravatar.com/avatar/726351295ec82e145928582f595aa3aa" class="img-rounded author-image" />
        <h4 class="section-title author-name">kula41</h4>
        <p class="author-bio">Do not build on quicksand high</p>
      </section> -->
    </div>

    <div class="clearfix"></div>

		<ul class="pager">
		  
		  <li class="previous"><a href="/seo/2015/04/20/baidu-include.html" title="如何让百度快速收录">&larr; Previous</a></li>
		  
		  
		  <li class="next"><a href="/seo/2015/04/21/seo-collet.html" title="六大免费网站数据采集器对比">Next &rarr;</a></li>
		  
		</ul>

		<hr>
	</div>
	
<!-- 	<div class="col-sm-2 sidebar-2">
		
	</div> -->
    <div id="disqus_thread"></div>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'kula41com'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
</article>

<div class="clearfix"></div>

</div>
			<div class="col-sm-4 hidden-xs typo" style=" padding-top: 90px; ">
		<h4>扫一扫，手机阅读</h4>
		<div class='qrcode'></div>

		<div id="sideBar">
		</div>

	</div>

	</div>


	<script src="http://cdn.bootcss.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
	<script src="http://cdn.bootcss.com/jquery.qrcode/1.0/jquery.qrcode.min.js"></script>
	<script type="text/javascript" src="/assets/resources/bootstrap/js/stick.min.js"></script>
	<script type="text/javascript" src="/assets/js/app.js"></script>
</body>
</html>

